<div class="background-pattern"></div>

<div class="container">
    <div class="header">
        <h1 class="title">ğŸŒŸ Vous avez gagnÃ© un niveau ğŸŒŸ</h1>
        <p class="subtitle">Distribuez 18 points en fonction des activitÃ©s qui vous attirent le plus (de 0 Ã  3 points par compÃ©tence)</p>
        
        <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-label">Points Disponibles</div>
                <div class="stat-value" id="availablePoints">18</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Points UtilisÃ©s</div>
                <div class="stat-value" id="usedPoints">0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Domaines DÃ©veloppÃ©s</div>
                <div class="stat-value" id="developedCategories">0</div>
            </div>
        </div>
        
        <button class="complete-button" id="completeButton" onclick="showResults()" disabled>
            Terminer l'Ã©valuation
        </button>
    </div>

    <div class="skill-tree-container">
        <div class="skill-tree">
            <div class="central-connections"></div>
            
            <!-- RÃ©aliste -->
            <div class="category-branch branch-realistic">
                <div class="category-icon" data-category="realistic" onclick="openSkillsPanel('realistic')">ğŸ”§</div>
                <div class="category-name">RÃ©aliste</div>
            </div>

            <!-- Investigatif -->
            <div class="category-branch branch-investigative">
                <div class="category-icon" data-category="investigative" onclick="openSkillsPanel('investigative')">ğŸ”¬</div>
                <div class="category-name">Investigatif</div>
            </div>

            <!-- Artistique -->
            <div class="category-branch branch-artistic">
                <div class="category-icon" data-category="artistic" onclick="openSkillsPanel('artistic')">ğŸ¨</div>
                <div class="category-name">Artistique</div>
            </div>

            <!-- Social -->
            <div class="category-branch branch-social">
                <div class="category-icon" data-category="social" onclick="openSkillsPanel('social')">ğŸ¤</div>
                <div class="category-name">Social</div>
            </div>

            <!-- Entreprenant -->
            <div class="category-branch branch-enterprising">
                <div class="category-icon" data-category="enterprising" onclick="openSkillsPanel('enterprising')">ğŸ’¼</div>
                <div class="category-name">Entreprenant</div>
            </div>

            <!-- Conventionnel -->
            <div class="category-branch branch-conventional">
                <div class="category-icon" data-category="conventional" onclick="openSkillsPanel('conventional')">ğŸ“‹</div>
                <div class="category-name">Conventionnel</div>
            </div>
        </div>
    </div>
</div>

<!-- Panel des compÃ©tences -->
<div class="skills-panel" id="skillsPanel">
    <button class="close-panel" onclick="closeSkillsPanel()">Ã—</button>
    <div class="skills-panel-header">
        <h3 class="skills-panel-title">
            <span id="categoryIcon">ğŸ”§</span>
            <span id="categoryTitle">RÃ©aliste</span>
        </h3>
    </div>
    <div id="skillsList"></div>
</div>

<!-- Modal des rÃ©sultats avec filtres -->
<div class="modal-overlay" id="resultsModal" onclick="closeModalIfClickedOutside(event)">
    <div class="results-modal" onclick="event.stopPropagation()">
        <button class="close-modal" onclick="closeResults()">Ã—</button>
        
        <div class="results-header">
            <h2 class="results-title">ğŸ¯ Vos RÃ©sultats RIASEC</h2>
            <p class="results-subtitle">Votre profil de personnalitÃ© professionnelle</p>
        </div>

        <div class="riasec-code">
            <div class="code-label">Votre Code RIASEC</div>
            <div class="code-value" id="riasecCode">RIA</div>
        </div>

        <div class="profile-section">
            <div class="profile-label">Votre Profil GamifiÃ©</div>
            <div id="profileInfo" class="profile-content">
                <div class="profile-icon">ğŸŒŸ</div>
                <div class="profile-name">Le Polyvalent</div>
                <div class="profile-description">Vous avez un profil unique et Ã©quilibrÃ©</div>
            </div>
        </div>

        <div class="chart-container">
            <h3 class="chart-title">ğŸ“Š RÃ©partition de vos Points</h3>
            <div class="bar-chart" id="barChart"></div>
        </div>

        <!-- Section des filtres avancÃ©s -->
        <div class="filters-section">
            <h3 class="filters-title">ğŸ” Affinez vos RÃ©sultats</h3>
            <div class="filters-grid">
                
                <!-- Filtre Lieu de travail -->
                <div class="filter-group">
                    <h4 class="filter-label">ğŸ“ Lieu de travail</h4>
                    <div class="filter-options">
                        <label class="filter-option">
                            <input type="checkbox" value="indoorsControlled" onchange="updateFilters()">
                            <span>ğŸ¢ Bureau climatisÃ©</span>
                        </label>
                        <label class="filter-option">
                            <input type="checkbox" value="indoorsNotControlled" onchange="updateFilters()">
                            <span>ğŸ”§ Atelier technique</span>
                        </label>
                        <label class="filter-option">
                            <input type="checkbox" value="outdoorsCovered" onchange="updateFilters()">
                            <span>ğŸ—ï¸ ExtÃ©rieur abritÃ©</span>
                        </label>
                        <label class="filter-option">
                            <input type="checkbox" value="outdoorsExposed" onchange="updateFilters()">
                            <span>ğŸŒ¤ï¸ ExtÃ©rieur tous temps</span>
                        </label>
                        <label class="filter-option">
                            <input type="checkbox" value="vehicle" onchange="updateFilters()">
                            <span>ğŸš— VÃ©hicule/Mobile</span>
                        </label>
                    </div>
                </div>

                <!-- Filtre Niveau d'Ã©tudes -->
                <div class="filter-group">
                    <h4 class="filter-label">ğŸ“ Niveau d'Ã©tudes</h4>
                    <div class="filter-options">
                        <label class="filter-option">
                            <input type="radio" name="education" value="2" onchange="updateFilters()">
                            <span>ğŸ“š Bac ou moins</span>
                        </label>
                        <label class="filter-option">
                            <input type="radio" name="education" value="5" onchange="updateFilters()">
                            <span>ğŸ“– Post-bac courte</span>
                        </label>
                        <label class="filter-option">
                            <input type="radio" name="education" value="6" onchange="updateFilters()">
                            <span>ğŸ¯ Licence/Bachelor</span>
                        </label>
                        <label class="filter-option">
                            <input type="radio" name="education" value="8" onchange="updateFilters()">
                            <span>ğŸ–ï¸ Master</span>
                        </label>
                        <label class="filter-option">
                            <input type="radio" name="education" value="12" onchange="updateFilters()">
                            <span>ğŸ‘¨â€ğŸ“ Doctorat+</span>
                        </label>
                    </div>
                </div>

                <!-- Filtre ExpÃ©rience -->
                <div class="filter-group">
                    <h4 class="filter-label">ğŸ’¼ ExpÃ©rience</h4>
                    <div class="filter-options">
                        <label class="filter-option">
                            <input type="radio" name="experience" value="debutant" onchange="updateFilters()">
                            <span>ğŸŒ± DÃ©butant (0-1 an)</span>
                        </label>
                        <label class="filter-option">
                            <input type="radio" name="experience" value="junior" onchange="updateFilters()">
                            <span>ğŸš€ Junior (1-3 ans)</span>
                        </label>
                        <label class="filter-option">
                            <input type="radio" name="experience" value="confirme" onchange="updateFilters()">
                            <span>ğŸ’ª ConfirmÃ© (3-6 ans)</span>
                        </label>
                        <label class="filter-option">
                            <input type="radio" name="experience" value="senior" onchange="updateFilters()">
                            <span>ğŸ‘‘ Senior (6+ ans)</span>
                        </label>
                    </div>
                </div>

                <!-- Filtre Motivations -->
                <div class="filter-group">
                    <h4 class="filter-label">ğŸ’ Motivations (max 3)</h4>
                    <div class="filter-options">
                        <label class="filter-option">
                            <input type="checkbox" value="achievement" onchange="updateWorkValues(this)">
                            <span>ğŸ† Accomplissement</span>
                        </label>
                        <label class="filter-option">
                            <input type="checkbox" value="independence" onchange="updateWorkValues(this)">
                            <span>ğŸ¦… Autonomie</span>
                        </label>
                        <label class="filter-option">
                            <input type="checkbox" value="recognition" onchange="updateWorkValues(this)">
                            <span>â­ Reconnaissance</span>
                        </label>
                        <label class="filter-option">
                            <input type="checkbox" value="relationships" onchange="updateWorkValues(this)">
                            <span>ğŸ¤ Relations humaines</span>
                        </label>
                        <label class="filter-option">
                            <input type="checkbox" value="support" onchange="updateWorkValues(this)">
                            <span>ğŸ›¡ï¸ SÃ©curitÃ© d'emploi</span>
                        </label>
                        <label class="filter-option">
                            <input type="checkbox" value="workingConditions" onchange="updateWorkValues(this)">
                            <span>ğŸ’° Conditions de travail</span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="filters-actions">
                <button class="filter-button apply-btn" onclick="applyFilters()">
                    âœ¨ Appliquer les Filtres
                </button>
                <button class="filter-button reset-btn" onclick="resetFilters()">
                    ğŸ”„ RÃ©initialiser
                </button>
                <div class="filter-info">
                    <span id="filteredJobsCount">0</span> mÃ©tiers correspondent Ã  vos critÃ¨res
                </div>
            </div>
        </div>

        <div id="jobRecommendations"></div>
    </div>
</div>

<!-- Notification -->
<div id="notification" class="notification"></div>
